console.log("Arquivo idioma.js carregado!");

const textos = {
  pt: {
    inicio: {
      inicioHeader: "Início",
      olimpiadasHeader:"Olímpiadas",
      sobreHeader:"Sobre",
      titulo: "Bem vindo, estudante!",
      textoParagrafo: "Ainda não encontrou uma olimpíada que seja a sua cara? A gente te ajuda filtrando todas as oportunidades do Brasil para atender aos seus interesses!",
      sublinhado: "Rápido, fácil e gratuito:",
      pesquise:"Pesquise qualquer olimpíada por nome ou palavra-chave",
      magica:'Ou selecione seus interesses em "Olimpíadas" e faremos a mágica acontecer',
      searchBar: "Pesquisar..."
    },
    olimpiadas: {
      inicioHeader: "Início",
      olimpiadasHeader:"Olímpiadas",
      sobreHeader:"Sobre",
      tituloOlimpiadas:"Olimpiadas de Conhecimento",
      tituloIntro:"Introdução",
      paragrafoIntro:"As Olimpíadas de Conhecimento são competições educativas que envolvem estudantes de diferentes níveis escolares, desafiando-os em diversas áreas do saber, como matemática, física, química, biologia, língua portuguesa, geografia, entre outras. Elas são organizadas por instituições educacionais, científicas ou governamentais, com o objetivo de incentivar o estudo, desenvolver o raciocínio lógico, estimular o pensamento crítico e descobrir novos talentos. Essas olimpíadas podem ser realizadas em nível municipal, estadual, nacional ou até internacional, e normalmente envolvem provas teóricas e práticas, dependendo da disciplina. Além de serem uma excelente oportunidade de aprendizado, elas também contribuem para a valorização do conhecimento e podem abrir portas para bolsas de estudo, participação em eventos acadêmicos e até intercâmbios. Participar de uma olimpíada do conhecimento é mais do que competir: é crescer, aprender e se desafiar constantemente.",
      tituloPorque:"Por que fazer olimpíadas?",
      paragrafoPorque:"É inegável que as olimpíadas já transformaram a vida de várias pessoas ao redor do mundo. Viagens internacionais, amizades com pessoas de interesses parecidos, medalhas e muito conhecimento ganho são alguns dos benefícios que você pode ter participando nessas competições. Vários jovens mencionam o fato de que olimpíadas abrem portas para quem deseja crescer, pois elas permitem uma experiência acadêmica única. Dessa forma, torna-se difícil mencionar todos os motivos para entrar nesse mundo incrível, embora existam os mais comuns:",
      ponto1:"Olimpíadas te desafiam!",
      ponto2:"Olimpíadas abrem sua mente",
      ponto3:"Experiências de vida incríveis",
      ponto4:"Novos caminhos para o futuro",
      exatas:"Exatas",
      tecnologia:"Tecnologia",
      linguagens:"Linguagens",
      humanas:"Humanas",
      interdiciplinaresoutros:"Interdiciplinares e outros",
      cienciasNatureza:"Ciências da Natureza",
      searchBar: "Pesquisar..."
    },
    catalogo: {
      inicioHeader: "Início",
      olimpiadasHeader: "Olímpiadas",
      sobreHeader: "Sobre",
      searchBar: "Pesquisar...",
      filtrar:"Filtrar Olimpíadas",
      areaConhecimento: "Área de conhecimento",
      tipoInscricao: "Tipo de registro",
      status: "Período de Inscrição",
      nivel: "Nível",
      exatas: "Exatas",
      tecnologia: "Tecnologia",
      linguagens: "Linguagens",
      humanas: "Humanas",
      interdiciplinaresOutros: "Interdisciplinares e outros",
      cienciasNatureza: "Ciências da natureza",
      escola: "Escola",
      aluno: "Aluno",
      aberto: "Aberto",
      embreve: "Em breve",
      fechado: "Fechado",
      fundamental1: "Fundamental I",
      fundamental2: "Fundamental II",
      ensinoMedio: "Ensino médio | Técnico",
      superior: "Ensino superior",
      livre: "Livre"
    },
    sobre: {
      inicioHeader: "Início",
      olimpiadasHeader:"Olímpiadas",
      sobreHeader:"Sobre",
      tituloSobre:"Sobre nós",
      tituloMissao:"Nossa missão",
      paragrafoMissao:"O Tudo Olimpíadas é o seu destino online para descobrir tudo sobre as Olimpíadas de conhecimento, projetadas para estudantes do ensino fundamental 2 ao ensino médio. Nosso site fornece informações detalhadas, dicas de estudo e recursos educacionais para ajudar os alunos a se prepararem e terem sucesso nessas competições desafiadoras. Estamos comprometidos em promover o aprendizado e o crescimento intelectual dos estudantes, capacitando-os a alcançar seu pleno potencial acadêmico.",
      tituloEquipe:"Equipe",
      tituloConheca:"Conheça a nossa equipe",
      paragrafoConheca:"Conheça a equipe dedicada por trás do Tudo Olimpíadas, composta por profissionais apaixonados por educação e conhecimento. Nossa equipe está empenhada em fornecer as melhores informações e orientações para os estudantes que buscam se destacar nas Olimpíadas de conhecimento.",
      searchBar: "Pesquisar..."
    },
    blog:{
      inicioHeader: "Início",
      olimpiadasHeader:"Olímpiadas",
      sobreHeader:"Sobre",
      searchBar: "Pesquisar...",
      embreve:"Em breve!"
    },
    resultados:{
      inicioHeader: "Início",
      olimpiadasHeader:"Olímpiadas",
      sobreHeader:"Sobre",
      searchBar: "Pesquisar...",
      resultados:"Resultados de busca"
    },
    buscar: {
      inicioHeader: "Início",
      olimpiadasHeader: "Olímpiadas",
      sobreHeader: "Sobre",
      searchBar: "Pesquisar...",
      search: "Pesquisar...",
      resultados: "Resultados da busca",
      nenhumResultado: "Nenhum resultado encontrado para"
    }
  },
  en: {
    inicio: {
     inicioHeader: "Home",
      olimpiadasHeader:"Olympiads",
      sobreHeader:"About",
      titulo: "Welcome, student!",
      textoParagrafo: "Haven’t found an olympiad that suits you yet? We’ll help you filter all the opportunities in Brazil to match your interests!",
      sublinhado: "Fast, easy, and free:",
      pesquise:"Search for any Olympics by name or keyword",
      magica:"Or select your interests in 'Olympiads' and we'll make the magic happen.",
      searchBar: "Search..."

    },
    olimpiadas: {
      inicioHeader: "Home",
      olimpiadasHeader:"Olympiads",
      sobreHeader:"About",
      tituloOlimpiadas:"Knowledge Olympiads",
      tituloIntro:"Introduction",
      paragrafoIntro:"Knowledge Olympiads are educational competitions that involve students from different school levels, challenging them in various fields of knowledge such as mathematics, physics, chemistry, biology, Portuguese language, geography, among others. They are organized by educational, scientific, or governmental institutions with the goal of encouraging study, developing logical reasoning, stimulating critical thinking, and discovering new talents. These olympiads can take place at municipal, state, national, or even international levels and typically include theoretical and practical exams depending on the subject. In addition to being an excellent learning opportunity, they also help promote the value of knowledge and can open doors to scholarships, participation in academic events, and even exchange programs. Participating in a knowledge olympiad is more than just competing: it's about growing, learning, and constantly challenging yourself.",
      tituloPorque:"Why participate in Olympiads?",
      paragrafoPorque:"It's undeniable that olympiads have already transformed the lives of many people around the world. International travel, friendships with like-minded people, medals, and a lot of knowledge gained are just some of the benefits you can have by participating in these competitions. Many young people mention that olympiads open doors for those who want to grow, as they provide a unique academic experience. That said, it’s hard to list all the reasons to enter this incredible world, although some are the most common:",
      ponto1:"Olympiads challenge you!",
      ponto2:"Olympiads open your mind",
      ponto3:"Amazing life experiences",
      ponto4:"New paths for the future",
      exatas:"Mathematics",
      tecnologia:"Technology",
      linguagens:"Languages",
      humanas:"Humanities",
      interdiciplinaresoutros:"Interdisciplinary and Others",
      cienciasNatureza:"Natural Sciences",
      searchBar: "Search..."
    },
    catalogo: {
      inicioHeader: "Home",
      olimpiadasHeader: "Olympiads",
      sobreHeader: "About",
      searchBar: "Search...",
      filtrar:"Filter olympiads",
      areaConhecimento: "Knowledge Area",
      tipoInscricao: "Registration Type",
      status: "Registration Period",
      nivel: "Level",
      exatas: "Mathematics",
      tecnologia: "Technology",
      linguagens: "Languages",
      humanas: "Humanities",
      interdiciplinaresOutros: "Interdisciplinary and others",
      cienciasNatureza: "Natural Sciences",
      escola: "School",
      aluno: "Student",
      aberto: "Open",
      embreve: "Coming soon",
      fechado: "Closed",
      fundamental1: "Elementary I",
      fundamental2: "Elementary II",
      ensinoMedio: "High School | Technical",
      superior: "Higher Education",
      livre: "Free"
    },
    sobre: {
      inicioHeader: "Home",
      olimpiadasHeader:"Olympiads",
      sobreHeader:"About",
      tituloSobre:"About us",
      tituloMissao:"Our mission",
      paragrafoMissao:"Tudo Olimpíadas is your online destination to discover everything about academic olympiads, designed for middle and high school students. Our site provides detailed information, study tips, and educational resources to help students prepare and succeed in these challenging competitions. We are committed to promoting learning and intellectual growth, empowering students to reach their full academic potential.",
      tituloEquipe:"Team",
      tituloConheca:"Meet Our Team",
      paragrafoConheca:"Meet the dedicated team behind Tudo Olimpíadas, composed of professionals passionate about education and knowledge. Our team is committed to providing the best information and guidance for students who want to stand out in academic olympiads.",
      searchBar: "Search..."
    },
    blog:{
      inicioHeader: "Home",
      olimpiadasHeader:"Olympiads",
      sobreHeader:"About",
      searchBar: "Search...",
      embreve:"Coming soon!"
    }, 
    buscar:{
      inicioHeader: "Home",
      olimpiadasHeader:"Olympiads",
      sobreHeader:"About",
      searchBar: "Search...",
      search: "Search...",
      resultados:"Search results"
    }
  }
};
// Idioma padrão: português
let idiomaAtual = localStorage.getItem('idioma') || 'pt';

function trocarIdioma(novoIdioma) {
  console.log("Idioma selecionado:", novoIdioma);
  idiomaAtual = novoIdioma;
  localStorage.setItem('idioma', idiomaAtual);
  aplicarIdioma();
}

function aplicarIdioma() {
  // Determina a página atual de forma mais robusta
  const path = window.location.pathname.toLowerCase();
  let pagina = 'inicio';
  
  if (path.includes('olimpiadas')) pagina = 'olimpiadas';
  else if (path.includes('sobre')) pagina = 'sobre';
  else if (path.includes('catalogo') || path.includes('filtros')) pagina = 'catalogo';
  else if (path.includes('buscar')) pagina = 'buscar';
  else if (path.includes('blog')) pagina = 'blog';
  // Adicione outras páginas conforme necessário

  console.log(`Aplicando idioma ${idiomaAtual} para página ${pagina}`);

  // Obtém os textos para a página atual
  const t = textos[idiomaAtual][pagina] || textos[idiomaAtual]['inicio'] || {};

  // 1. Atualiza elementos com IDs correspondentes
  Object.keys(t).forEach(id => {
    const el = document.getElementById(id);
    if (!el) return;
    
    if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
      el.placeholder = t[id];
    } else {
      el.textContent = t[id];
    }
  });

  // 2. Atualiza seletores de idioma
  const selectDesktop = document.getElementById('seletor-idioma');
  const selectMobile = document.getElementById('seletor-idioma-mobile');
  
  if (selectDesktop) selectDesktop.value = idiomaAtual;
  if (selectMobile) selectMobile.value = idiomaAtual;
}

function configurarSeletoresIdioma() {
  const selectDesktop = document.getElementById('seletor-idioma');
  const selectMobile = document.getElementById('seletor-idioma-mobile');
  
  const configurarSeletor = (seletor) => {
      if (seletor) {
          seletor.value = idiomaAtual;
          seletor.addEventListener('change', function() {
              trocarIdioma(this.value);
          });
      }
  };
  
  configurarSeletor(selectDesktop);
  configurarSeletor(selectMobile);
}

// Configuração inicial
document.addEventListener('DOMContentLoaded', function() {
  aplicarIdioma();
  configurarSeletoresIdioma();
  
  // Configura eventos para ambos os seletores
  const configurarSeletor = (seletor) => {
    if (seletor) {
      seletor.value = idiomaAtual; // Seta o valor atual
      seletor.addEventListener('change', function() {
        trocarIdioma(this.value);
      });
    }
  };
  
  configurarSeletor(document.getElementById('seletor-idioma'));
  configurarSeletor(document.getElementById('seletor-idioma-mobile'));
});

// Para permitir teste no console
window.trocarIdioma = trocarIdioma;